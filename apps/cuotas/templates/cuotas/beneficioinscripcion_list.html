{% extends "base.html" %}
{% load static %}
{% block title %}Beneficios por inscripciÃ³n{% endblock %}
{% block extra_styles %}<link rel="stylesheet" href="{% static 'cuotas/css/beneficios.css' %}">{% endblock %}

{% block content %}
<div class="cuotas-card">
  <div class="cuotas-header">
    <div>
      <h2>ðŸ“Œ Beneficios asignados {% if inscripcion %}a la inscripciÃ³n #{{ inscripcion.id }}{% endif %}</h2>
      {% if inscripcion %}<p class="cuotas-header__subtitle">Alumno: {{ inscripcion.estudiante }} â€” Ciclo: {{ inscripcion.ciclo }}</p>{% endif %}
    </div>
    <div class="student-actions">
      {% if inscripcion %}
        <a class="btn" href="{% url 'cuotas:beneficioinscripcion_create_for_inscripcion' inscripcion.id %}">Asignar beneficio</a>
      {% else %}
        <a class="btn" href="{% url 'cuotas:beneficioinscripcion_create' %}">Asignar beneficio</a>
      {% endif %}
    </div>
  </div>

  <div class="table-responsive">
    <table class="tabla-cuotas">
      <thead>
        <tr>
          <th>#</th><th>InscripciÃ³n</th><th>Beneficio</th><th>Desde</th><th>Hasta</th><th>Activo</th><th></th>
        </tr>
      </thead>
      <tbody>
        {% for a in asignaciones %}
          <tr>
            <td>{{ a.id }}</td>
            <td>#{{ a.inscripcion_id }}</td>
            <td>{{ a.beneficio }}</td>
            <td>{{ a.desde|date:'d/m/Y' }}</td>
            <td>{{ a.hasta|date:'d/m/Y' }}</td>
            <td><span class="pill {{ a.activo|yesno:'ok,no' }}">{{ a.activo|yesno:'SÃ­,No' }}</span></td>
            <td class="actions">
              <a class="btn btn-ghost" href="{% url 'cuotas:beneficioinscripcion_update' a.pk %}">Editar</a>
              <a class="btn btn-danger-ghost" href="{% url 'cuotas:beneficioinscripcion_delete' a.pk %}">Eliminar</a>
            </td>
          </tr>
        {% empty %}
          <tr><td colspan="7" class="empty">No hay beneficios asignados.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {% if is_paginated %}
    <div class="paginacion">
      {% if page_obj.has_previous %}
        <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-light">Anterior</a>
      {% endif %}
      <span>PÃ¡gina {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}</span>
      {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}" class="btn btn-light">Siguiente</a>
      {% endif %}
    </div>
  {% endif %}
</div>
{% endblock %}