{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block title %}Tarifa por Nivel{% endblock %}

{% block extra_styles %}
<link rel="stylesheet" href="{% static 'cuotas/css/tarifa.css' %}">
{% endblock %}

{% block content %}
<div class="student-card cuotas-card">
  <div class="student-header cuotas-header">
    <div>
      <h2>
        {% if view.object %}
          ✏️ Editar Tarifa
        {% else %}
          ➕ Nueva Tarifa
        {% endif %}
      </h2>
      <p class="cuotas-header__subtitle">Asigná los montos base de inscripción y cuota mensual por nivel.</p>
    </div>
    <div class="student-actions">
      <a href="{% url 'cuotas:tarifa_nivel_list' %}" class="btn btn-light">Volver al listado</a>
    </div>
  </div>

  <!-- IMPORTANTE: action dinámico (create/update) -->
  <form id="tarifa-form" method="post"
        action="{% if view.object %}{% url 'cuotas:tarifa_nivel_update' view.object.pk %}{% else %}{% url 'cuotas:tarifa_nivel_create' %}{% endif %}"
        novalidate>
    {% csrf_token %}

    {{ form|crispy }}

    <!-- Footer con botones por si Crispy no muestra el Submit -->
    <div class="form-footer">
      <button type="submit" class="btn" id="btn-guardar">Guardar</button>
      <a href="{% url 'cuotas:tarifa_nivel_list' %}" class="btn btn-light">Cancelar</a>
    </div>
  </form>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{% static 'cuotas/js/tarifa.js' %}"></script>
{% endblock %}
