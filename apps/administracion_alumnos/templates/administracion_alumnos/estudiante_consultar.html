{% extends 'base.html' %}

{% block title %}Consultar Alumno{% endblock %}

{% block extra_styles %}
    <link rel="stylesheet" href="../../static/administracion_alumnos/css/syles_consultar_alumno.css">
{% endblock %}

{% block content %}

<div class="consulta-alumno">
    <div class="consulta-alumno__contenedor">
        <form method="post" class="consulta-alumno__formulario">
            {% csrf_token %}
            <label for="cuil" class="consulta-alumno__etiqueta">CUIL del Alumno:</label>
            <input type="text" id="cuil" name="cuil" class="consulta-alumno__input" required>
            <button class="consulta-alumno__boton">
                <span class="consulta-alumno__circulo" aria-hidden="true">
                    <span class="consulta-alumno__icono consulta-alumno__icono--flecha"></span>
                </span>
                <span class="consulta-alumno__texto-boton">Buscar</span>
            </button>
        </form> 
    
        {% if estudiante %}
            <div class="consulta-alumno__resultado">
                <h2 class="consulta-alumno__titulo">Alumno encontrado</h2>
                <div class="consulta-alumno__datos">
                    <h2 class="consulta-alumno__subtitulo">Datos del Alumno</h2>
                    <p class="consulta-alumno__parrafo"><strong>CUIL:</strong> {{ estudiante.cuil_estudiante }}</p>
                    <p class="consulta-alumno__parrafo"><strong>Nombre:</strong> {{ estudiante.apellidos_estudiante }}, {{ estudiante.nombres_estudiante }}</p>
                    <p class="consulta-alumno__parrafo"><strong>Tel-Cel:</strong> {{ estudiante.tel_cel_estudiante }}</p>
                    <p class="consulta-alumno__parrafo"><strong>Última Actualización:</strong> {{ estudiante.marca_temporal }}</p>
                </div>
                <div class="consulta-alumno__grupo-botones">
                    <form method="get" action="{% url 'ver_datos_estudiante' pk=estudiante.pk %}" class="consulta-alumno__formulario-boton">
                        <button class="consulta-alumno__boton">
                            <span class="consulta-alumno__circulo" aria-hidden="true">
                                <span class="consulta-alumno__icono consulta-alumno__icono--flecha"></span>
                            </span>
                            <span class="consulta-alumno__texto-boton">Ver</span>
                        </button>
                    </form>
                    <form method="get" action="{% url 'estudiante_edit' pk=estudiante.pk %}" class="consulta-alumno__formulario-boton">
                        <button class="consulta-alumno__boton">
                            <span class="consulta-alumno__circulo" aria-hidden="true">
                                <span class="consulta-alumno__icono consulta-alumno__icono--flecha"></span>
                            </span>
                            <span class="consulta-alumno__texto-boton">Editar</span>
                        </button>
                    </form>
                </div>
            </div>
    </div>
    
    {% elif error %}
        <p class="consulta-alumno__error">{{ error }}</p>
    {% endif %}
</div>

{% endblock %}


{% block extra_scripts %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('delete-button').addEventListener('click', function() {
                if (confirm('¿Estás seguro de que quieres eliminar este alumno?')) {
                    document.getElementById('delete-form').submit();
                }
            });
        });
        
    </script>
{% endblock %}
